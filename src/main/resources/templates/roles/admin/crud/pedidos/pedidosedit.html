<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Editar Pedido - La Fragata Giratoria</title>
    <link rel="stylesheet" href="/css/pedidosedit.css" />
</head>

<body>
<div class="layout-container">

    <aside class="sidebar">
        <div class="sidebar-top">

            <div class="logo">
                <img th:src="@{/img/icono-fragata.jpg}" alt="Logo">
                <span>La Fragata Giratoria</span>
            </div>

            <input class="search-input" type="search" placeholder="üîç B√∫squeda" />

            <nav class="menu">
                <a href="/roles/admin/dashboard" class="nav-button">Inicio</a>
                <a href="/productos" class="nav-button">Productos</a>
                <a href="/crud/platillos" class="nav-button">Platillos</a>
                <a href="/crud/compras" class="nav-button">Compras</a>
                <a href="/crud/pedidos" class="nav-button active">Pedidos</a>
                <a href="/crud/usuarios" class="nav-button">Usuarios</a>
                <a href="/crud/metodosdepago" class="nav-button">M√©todos de Pago</a>
            </nav>

        </div>

        <div class="bottom-buttons">
            <a href="/admin/ajustes" class="nav-button">Ajustes</a>
            <a href="/roles/admin/ayuda" class="nav-button">Ayuda</a>
            <a href="/logout" class="nav-button">Salir</a>
        </div>
    </aside>

    <main class="main-content">
        <div class="dashboard-wrapper">

            <div class="header-title">
                <h1>Editar Pedido</h1>
                <p>
                    Modifica el pedido con ID:
                    <strong th:text="${pedido.id}"></strong>
                </p>
            </div>

            <form th:action="@{/crud/pedidos}"
                  th:object="${pedido}"
                  method="post"
                  class="pedido-form">

                <input type="hidden" th:field="*{id}" />

                <div class="form-row">
                    <div class="form-group">
                        <label for="fecha">Fecha</label>
                        <input type="date" id="fecha" th:field="*{fecha}" required />
                    </div>

                    <div class="form-group">
                        <label for="cantidad">Cantidad</label>
                        <input type="number" id="cantidad" th:field="*{cantidad}" min="1" required />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="precioUnitario">Precio Unitario</label>
                        <input type="number" id="precioUnitario" th:field="*{precioUnitario}" step="0.01" required />
                    </div>

                    <div class="form-group">
                        <label for="subtotal">Subtotal</label>
                        <input type="number" id="subtotal" th:field="*{subtotal}" step="0.01" required />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="total">Total</label>
                        <input type="number" id="total" th:field="*{total}" step="0.01" required />
                    </div>

                    <div class="form-group">
                        <label for="estado">Estado</label>
                        <input type="text" id="estado" th:field="*{estado}" required />
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="idPlatillo">Platillo Principal</label>
                    <select id="idPlatillo" th:field="*{idPlatillo}">
                        <option value="">-- Seleccione un Platillo --</option>
                        <option th:each="platilloOpt : ${platillos}"
                                th:value="${platilloOpt.idPlatillo}"
                                th:text="${platilloOpt.nombre}"
                                th:selected="${pedido.idPlatillo != null and pedido.idPlatillo == platilloOpt.idPlatillo}">
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="observaciones">Observaciones</label>
                    <textarea id="observaciones"
                              th:field="*{observaciones}"
                              rows="3"></textarea>
                </div>

                <h3>Asignaci√≥n</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label for="cliente">Cliente</label>
                        <select id="cliente" th:field="*{cliente}">
                            <option value="">-- Seleccione un Cliente --</option>
                            <option th:each="clienteOpt : ${clientes}"
                                    th:value="${clienteOpt.idCliente}"
                                    th:text="${clienteOpt.nombre}"
                                    th:selected="${pedido.cliente != null and pedido.cliente.idCliente == clienteOpt.idCliente}">
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="usuario">Usuario (Quien registra)</label>
                        <select id="usuario" th:field="*{usuario}">
                            <option value="">-- Seleccione un Usuario --</option>
                            <option th:each="usuarioOpt : ${usuarios}"
                                    th:value="${usuarioOpt.idUsuario}"
                                    th:text="${usuarioOpt.nombreUsuario + ' (' + usuarioOpt.rol + ')'}"
                                    th:selected="${pedido.usuario != null and pedido.usuario.idUsuario == usuarioOpt.idUsuario}">
                            </option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="estadoCocina">Estado Cocina</label>
                        <input type="text" id="estadoCocina" th:field="*{estadoCocina}" readonly />
                    </div>
                    
                    <div class="form-group">
                        <label for="estadoMesero">Estado Mesero</label>
                        <input type="text" id="estadoMesero" th:field="*{estadoMesero}" readonly />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="idMetodoPago">ID M√©todo Pago</label>
                        <input type="number" id="idMetodoPago" th:field="*{idMetodoPago}" />
                    </div>

                    <div class="form-group">
                        <label for="idAdicional">ID Adicional</label>
                        <input type="number" id="idAdicional" th:field="*{idAdicional}" />
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="submit" class="btn-submit">üíæ Actualizar Pedido</button>
                    <a th:href="@{/crud/pedidos}" class="btn-cancel">‚úñ Cancelar</a>
                </div>

            </form>

            <a th:href="@{/crud/pedidos}" class="back-to-dashboard">
                ‚Üê Volver a Pedidos
            </a>

        </div>
    </main>

</div>

<script src="/js/pedidos.js"></script>
</body>
</html>